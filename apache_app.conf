# Configuração Apache para DigitalOcean/Heroku Buildpack
# O buildpack do Heroku usa /app como diretório raiz

# Configurar tipos MIME primeiro
AddType application/x-httpd-php .php
AddType application/x-httpd-php-source .phps

# Forçar processamento PHP para todos os arquivos .php
<FilesMatch "\.php$">
    SetHandler application/x-httpd-php
    ForceType application/x-httpd-php
</FilesMatch>

# Configurar diretório /app (usado pelo buildpack Heroku)
<Directory /app>
    DirectoryIndex index.php index.html
    AllowOverride All
    Options -Indexes +FollowSymLinks
    Require all granted
    
    # Forçar processamento PHP
    <FilesMatch "\.php$">
        SetHandler application/x-httpd-php
        ForceType application/x-httpd-php
    </FilesMatch>
</Directory>

# Configurar diretório raiz também
<Directory />
    DirectoryIndex index.php index.html
    AllowOverride All
    Options -Indexes +FollowSymLinks
    Require all granted
</Directory>

# Headers CORS
Header always set Access-Control-Allow-Origin "*"
Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With"

# Habilitar mod_rewrite
RewriteEngine On
